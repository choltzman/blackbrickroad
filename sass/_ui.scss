/* UI Sprites */
$ui-use-percentages: true;
$ui-sprite-layout: smart;
@import "ui/*.png";
$ui-sprite: $ui-sprites;
$ui-sprite-width: sprite_width($ui-sprites);

/* The interface */
#ui {
	z-index: 2;
	float: left;
	width: $instructions-width-ems; 
	height: $instructions-height-ems;
	font-family: $writing;
	position: relative;
	.wrapper {
		color: #fff;
		overflow: auto;		
		position: absolute;
		line-height: 1.4em;
	}
	h1 {
		color: #ebaa0e;
		text-transform: uppercase;
		font-size: 1.1em;
		padding-top: .25em;
	}
	p, h1 {
		text-align: center;
	}
}

/* States */
[data-progress="dialog-intro"] {
	.instructions {opacity: 0}
	.to-do { display: none}
}

[data-progress="cleaning-house"] {
	.instructions {opacity: 1}
	.to-do { display: block}
	#dialog-intro {display:none}
}

.instructions {
	@include ui-sprite(bg_instructions); 
	@include set-dimensions(225px, 232px, $ui-width);
	position: relative;
	@include set-bg-width($ui-sprite-width, $ui-sprite, bg_instructions);
	@include offsetLeft(42px, $instructions-width);
	.wrapper {
		@include set-position(35px, 104px, $instructions-width, $instructions-height);
		@include set-width(170px, $instructions-width);
		height: 10em;
	}
}

.dialog-intro, .to-do, .dialog-outro {
	position: relative;
	@include ui-sprite(bg_list); 
	@include set-dimensions(227px, $instructions-height, $ui-width);
	@include set-bg-width($ui-sprite-width, $ui-sprite, bg_list);
	float: right;
}

@include keyframes(fadeInDown) {
  0% { opacity: 0 }
  1% { opacity: 0 }
  100% { opacity: 1 }
}

@include keyframes(fadeInUp) {
  0% { opacity: 0 }
  1% { opacity: 0 }
  100% { opacity: 1 }
}

.to-do {
	@include offsetLeft(59px, $instructions-width);
	.wrapper {
		@include set-position(34px, 24px, $instructions-width, $instructions-height);
		@include set-width(154px, $instructions-width);
		height: 29em;
	}
	ul {
		[data-currentFloor="downstairs"] & {
			opacity: 0;
			@include animation(fadeInDown 2s $floor-easing forwards);
		}
		[data-currentFloor="upstairs"] & {
			opacity: 0;
			@include animation(fadeInUp 2s $floor-easing forwards);
		}
	}
	li {
		padding-left: percentage(22px/154px);
		position: relative;
		&:before {
			content: " ";
			@include ui-sprite(i_dash); 
			@include set-dimensions(11px, 3px, $ui-width);
			@include set-bg-width($ui-sprite-width, $ui-sprite, i_dash);
			position: absolute;
			top: .5em; left: 0;
		}
		[data-currentFloor="default"] &.downstairs,
		[data-currentFloor="upstairs"] &.downstairs,
		[data-currentFloor="downstairs"] &.upstairs { display: none; }
	}
	del {
		@include opacity(.6);
	}
}

.dialog-outro {
	display: none;
}


/* Navigating between floors */
.to_upstairs {
	@include ui-sprite(i_up);
	@include set-dimensions(46px, 66px, $house-width);
	@include set-bg-width($ui-sprite-width, $ui-sprite, i_up);
	@include set-position(624px, 1104px, $house-width, $frame-height*2);
}

.to_downstairs {
	@include ui-sprite(i_down);
	@include set-dimensions(46px, 66px, $house-width);
	@include set-bg-width($ui-sprite-width, $ui-sprite, i_up);
	@include set-position(214px, 633px, $house-width, $frame-height*2);
}

.warp { 
	cursor: pointer;
	position: absolute;
	z-index:10;
}

/* Conversation between Dolly and Scare Crow */
/* Dialog Sprites */
$dialog-use-percentages: true;
$dialog-sprite-spacing: 2px;
@import "dialog/*.png";
$dialog-sprite: $dialog-sprites;
$dialog-sprite-width: sprite_width($dialog-sprites);

#dialog-intro {
	position: relative;
}

@include create-dialog(talk1, 228px, 43px);
@include create-dialog(talk2, 227px, 43px);
@include create-dialog(talk3, 232px, 43px);
@include create-dialog(talk4, 230px, 43px);
@include create-dialog(talk5, 289px, 40px);
@include create-dialog(talk6, 286px, 43px);
@include create-dialog(talk7, 297px, 43px);
@include create-dialog(talk8, 315px, 20px);